# Example workflow to use YangHanlin/oss-deployment-action

# Name of the workflow; change to anything if you like
name: Deploy to OSS

# Controls when the action will run. Triggers the workflow on push events but only for
# the main branch
on:
  push:
    branches: [ gh-pages ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "deploy"
  deploy:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - name: Check out repository
        uses: actions/checkout@v3

      # Deploys specified files to OSS
      - name: Deploy files to OSS
        uses: Yanghanlin/oss-deployment-action@v1
        with:
          oss-endpoint: oss-cn-hangzhou.aliyuncs.com
          oss-path: oss://tree-diagram-sites/oss-deployment-action/
          oss-accesskey-id: LTAI4FzrEJA5duCxjit3EEuv
          oss-accesskey-secret: ${{ secrets.OSS_ACCESSKEY_SECRET }}
          ignored-patterns: '.git*'
          delete-first: true
          cache-ossutil: true
          debug: ${{ secrets.ACTIONS_STEP_DEBUG }}
